<div class = "container">
<p>
Welcome, <%=@user.first_name%>!
<% if @user.role == "manager"%>
These are the lessons you manage.
<% else %>
These are the lessons you teach.
<% end %>
</p>
<%= calendar number_of_days: 1, events: @lessons do |date, lessons| %>
<!-- <span class="date-str"><%= date %></span> -->
<div class = "room">
<table>
  <tr><th>h</th></tr>
    <% (7..20).each do |h|%>
    <tr><td>
    <div class = "lesson-hour">
      <%= h %>
    </div>
   </tr></td>
<% end %>
</table>
<% @rooms.each do |room| %>
<% vacant_cell = true %>
<table>
  <tr><th>Room <%= room.name %></th></tr>
    <% (7..20).each do |h|%>
    <% lessons.each do |lesson| %>
      <% if room.id == lesson.room.id && h==lesson.start_time.strftime('%H').to_i %>
        <% vacant_cell = false %>
        <tr><td>
          <%= link_to lesson_path(lesson) do %>
          <div class = "lesson-card level-<%= lesson.course.level.downcase %>">
            <%= lesson.start_time.strftime('%H') %> <%= lesson.start_time.strftime('%M') %>
            <%= lesson.course.language %>
            <%= lesson.course.level %>
          </div>
          <% end %>
        </td></tr>
      <% end %>
      <% end %>
  <% if vacant_cell %>
    <tr><td>
    <div class = "lesson-card-vacant">XXXXXXXXXXXXXXXXXXXXXXXX</div>
    </td></tr>
  <% end %>
  <% vacant_cell = true %>
  <% end %>
</table>
<% end %>
<% end %>
</div>
</div>


